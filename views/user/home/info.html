{{#extend "user/ulayout"}}
    {{#replace "breadcrumbPath"}}
        <li><a href="#">个人信息</a></li>
    {{/replace}}
    {{#replace "leftNav"}}
        <h2 class="mt">管理中心</h2>
        <ul>
            {{#eq _s.user.is_admin 1}}
                <li {{#eq action 'audit'}}class="current"{{/eq}}>
                    <a href="/home/audit">审核管理</a>
                </li>
            {{/eq}}
            <li {{#eq action 'avatar'}}class="current"{{/eq}}>
                <a href="/home/avatar">修改头像</a>
            </li>
            <li {{#eq action 'info'}}class="current"{{/eq}}>
                <a href="/home/info">个人资料</a>
            </li>
            <!-- <li {{#eq action 'msg'}}class="current"{{/eq}}>
                <a href="/home/msg">消息</a>
            </li> -->
            <li {{#eq action 'topic'}}class="current"{{/eq}}>
                <a href="/home/topic">主题/帖子</a>
            </li>
            <li {{#eq action 'fav'}}class="current"{{/eq}}>
                <a href="/home/fav">收藏</a>
            </li>
            <li {{#eq action 'friend'}}class="current"{{/eq}}>
                <a href="/home/friend">好友</a>
            </li>
            <li {{#eq action 'follow'}}class="current"{{/eq}}>
                <a href="/home/follow">关注</a>
            </li>
            <li {{#eq action 'verify'}}class="current"{{/eq}}>
                <a href="/home/verify">我的认证</a>
            </li>
            <!-- <li {{#eq action 'pwd'}}class="current"{{/eq}}>
                <a href="/home/pwd">密码安全</a>
            </li> -->
        </ul>
    {{/replace}}
    {{#replace "content"}}
        <form class="form-horizontal" role="form" action="/home/info" method="post">
            <!-- <div class="form-group">
                <label class="col-sm-2 control-label">登录名</label>
                <div class="col-sm-8">
                    <p class="form-control-static">{{_s.user.loginname}}</p>
                </div>
            </div> -->
            <div class="form-group">
                <label for="inputPassword" class="col-sm-2 control-label">名称</label>
                <div class="col-sm-10">
                    <p class="form-control-static">{{user.nickname}}</p>
                </div>
            </div>
            <div class="form-group">
                <label for="mobile" class="col-sm-2 control-label">真实姓名</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" name="realname" value="{{user.user_profile.realname}}">
                </div>
            </div>
            <div class="form-group">
                <label for="mobile" class="col-sm-2 control-label">手机</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" name="mobile" value="{{user.user_profile.mobile}}">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">固定电话</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" name="telephone" value="{{user.user_profile.telephone}}">
                </div>
            </div>
            <div class="form-group">
                <label for="addr" class="col-sm-2 control-label">家庭地址</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" name="address" value="{{user.user_profile.address}}">
                </div>
            </div>
            <div class="form-group">
                <label for="email" class="col-sm-2 control-label">邮箱</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" name="email" value="{{user.user_profile.email}}">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">性别</label>
                <div class="col-sm-10">
                    <select name="gender" class="form-control">
                        <option value="0" {{#eq user.user_profile.gender 0}}selected{{/eq}}>保密</option>
                        <option value="1" {{#eq user.user_profile.gender 1}}selected{{/eq}}>男</option>
                        <option value="2" {{#eq user.user_profile.gender 2}}selected{{/eq}}>女</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="sex" class="col-sm-2 control-label">QQ</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" name="qq" value="{{user.user_profile.qq}}">
                </div>
            </div>
            <div class="form-group">
                <label for="sex" class="col-sm-2 control-label">签名</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" name="signature" value="{{user.user_profile.signature}}">
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-10 col-sm-offset-2">
                    <button type="submit" class="btn btn-md btn-primary">提交</button>
                </div>
            </div>
        </form>
        {{#eq _pathvar.code 1}}
            <script type="text/javascript">
                require(['sib.dialog'], function(Dialog){
                    Dialog.tip('操作成功！');
                });
            </script>
        {{/eq}}
    {{/replace}}
    {{#append "js"}}
        <script type="text/javascript">
        require(['jquery', 'sib.sib', 'sib.pager', 'hbs', 'hbs-helper.calc', 'hbs-helper.moment'], 
            function($, Sib, Pager, Handlebars){

            Sib.subscribe('createPager', function(info){
                createPager(info);
            });
            function createPager(info){
                var tpl = Handlebars.compile($(info.tplId).text());
                new Pager({
                    appendTo : info.pageId,
                    totalPages: info.totalPages,  //总页数
                    totalRecords : info.totalRecords,   //总记录数
                    current: info.current || 1,
                    loading: false,
                    showPageNumber : 10,//每次显示页码数量
                    threme : null,
                    gotoLabel : '跳转',
                    displayMsg: '共{total}条/{pages}页',
                    selectPage: function(evt, opts){
                        $.ajax({
                            url : info.url + '?page=' + opts.current,
                            success : function(data){
                                if(data.list) {
                                    $(info.listId).html(tpl(data));
                                }
                            },
                            error : function(data){
                                Dialog.tip(data.responseText);
                            }
                        });
                    }
                });
            }
        });
        </script>
    {{/append}}
{{/extend}}